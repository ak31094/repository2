<!DOCTYPE html>
<html>
  <head>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="http://code.highcharts.com/modules/exporting.js"></script>
    <script>  
		$(function () {
			 
			 $.getJSON('http://cooper-union-instagram-proxy.herokuapp.com/search/tag/nyc?count=50', function(photos){
	          var normal = 0;
	          var mayfair = 0;
	          var sierra = 0;
	          var valencia = 0;
	          var hefe = 0;
	          var sutro = 0;
	          var other = 0;
	          for(i in photos) {
	            console.log(photos[i].filter);
	            for(j in photos[i].filter) {
	              if(photos[i].filter[j] === "Normal") {
	                normal++;
	              }
	              if(photos[i].filter[j] === "Mayfair") {
	                mayfair++;
	              }
	              if(photos[i].filter[j] === "Sierra") {
	                manhattan++;
	              }
	              if(photos[i].filter[j] === "Valencia") {
	                valencia++;
	              }
	              if(photos[i].filter[j] === "Sutro") {
	                sutro++;
	              }
	              if(photos[i].filter[j] !== "Sutro" && "Valencia" && "Sierra" && "Mayfair" && "Normal") {
	                other++;
	              }
	            }
	          }
	          var data = [
	            ['Normal', normal],
	            ['Mayfair', mayfair],
	            ['Sierra', sierra],
	            ['Valencia', valencia],
	            ['Sutro', sutro],
	            ['Other', other],
	          ]  


		    $('#container').highcharts({
		        chart: {
		            plotBackgroundColor: null,
		            plotBorderWidth: 0,
		            plotShadow: false
		        },
		        title: {
		            text: 'Top Instagram<br>Filters!<br>(last 50)',
		            align: 'center',
		            verticalAlign: 'middle',
		            y: 50
		        },
		        tooltip: {
		            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
		        },
		        plotOptions: {
		            pie: {
		                dataLabels: {
		                    enabled: true,
		                    distance: -50,
		                    style: {
		                        fontWeight: 'bold',
		                        color: 'white',
		                        textShadow: '0px 1px 2px black'
		                    }
		                },
		                startAngle: -90,
		                endAngle: 90,
		                center: ['50%', '75%']
		            }
		        },
		        series: [{
		            type: 'pie',
		            name: 'Browser share',
		            innerSize: '50%',
		            data: data
		                
		                }]
		        });
		    });
		});
	</script>
  </head>
  <body>
<div id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>
  </body>
</html>
